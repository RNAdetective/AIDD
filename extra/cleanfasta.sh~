#!/usr/bin/env bash

cp /home/user/AIDD/extra/cleanfasta.py /home/user/Downloads/
export PATH=$PATH:/home/user/AIDD/AIDD_tools/bin
INPUT=/home/user/Downloads/sequenceofinterest.csv
OLDIFS=$IFS
IFS=,
[ ! -f $INPUT ] && { echo "$INPUT file not found"; exit 99; }
while read  x sequencename
do
    sed -i "s/sequenceofinterest/"$sequencename"/g" /home/user/Downloads/cleanfasta.py
    python /home/user/Downloads/cleanfasta.py
    sed -i "s/"$sequencename"/"sequenceofinterest"/g" /home/user/Downloads/cleanfasta.py
done < $INPUT
IFS=$OLDIFS
cp /home/user/AIDD/extra/removeblanks.sh /home/user/Downloads/removeblanks.sh
bash /home/user/Downloads/removeblanks.sh
cp /home/user/AIDD/extra/splitfastafiles.sh /home/user/Downloads/splitfastafiles.sh
INPUT=/home/user/Downloads/sequenceofinterest.csv
OLDIFS=$IFS
IFS=,
[ ! -f $INPUT ] && { echo "$INPUT file not found"; exit 99; }
while read  x sequencename
do
    sed -i "s/sequenceofinterest/"$sequencename"/g" /home/user/Downloads/splitfastafiles.sh
    bash /home/user/Downloads/splitfastafiles.sh
    sed -i "s/"$sequencename"/"sequenceofinterest"/g" /home/user/Downloads/splitfastafiles.sh
done < $INPUT
IFS=$OLDIFS

